<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì–´ë“œ ëª¨í„° ì„¤ê³„ ê³„ì‚°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #00d4ff;
            margin-bottom: 30px;
            font-size: 1.8rem;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        .tab {
            padding: 12px 24px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: #a0a0a0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }
        .tab:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        .tab.active {
            background: rgba(0, 212, 255, 0.3);
            color: #00d4ff;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .card-title {
            color: #00d4ff;
            font-size: 1.1rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.3);
        }
        .input-group {
            margin-bottom: 14px;
        }
        .input-group label {
            display: block;
            margin-bottom: 6px;
            color: #a0a0a0;
            font-size: 0.85rem;
        }
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 0.95rem;
        }
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .preset-container {
            margin-bottom: 16px;
        }
        .preset-container label {
            display: block;
            margin-bottom: 8px;
            color: #a0a0a0;
            font-size: 0.85rem;
        }
        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .preset-btn {
            padding: 6px 12px;
            border: 1px solid rgba(0, 212, 255, 0.5);
            border-radius: 6px;
            background: transparent;
            color: #00d4ff;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        .preset-btn:hover {
            background: rgba(0, 212, 255, 0.2);
        }
        .preset-btn.active {
            background: rgba(0, 212, 255, 0.3);
        }
        .result-section {
            margin-top: 16px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        .result-section h4 {
            color: #00d4ff;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }
        .result-item:last-child {
            border-bottom: none;
        }
        .result-label {
            color: #a0a0a0;
        }
        .result-value {
            color: #00ff88;
            font-weight: bold;
        }
        .result-value.warning {
            color: #ff6b6b;
        }
        .gear-stage {
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            padding: 14px;
            margin-bottom: 10px;
        }
        .gear-stage-title {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        .status-badge {
            display: inline-block;
            padding: 10px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 16px;
            font-size: 0.9rem;
        }
        .status-success {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }
        .status-fail {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
        }
        .chart-container {
            margin-top: 16px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 16px;
        }
        .chart-container h4 {
            color: #00d4ff;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }
        canvas {
            width: 100% !important;
            height: 200px !important;
        }
        .gear-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            padding: 16px;
            flex-wrap: wrap;
        }
        .gear {
            border: 3px solid #00d4ff;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #00d4ff;
            font-weight: bold;
            font-size: 0.7rem;
            min-width: 30px;
            min-height: 30px;
        }
        .shaft {
            width: 20px;
            height: 4px;
            background: #666;
        }
        .theory-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
        }
        .theory-section h3 {
            color: #00d4ff;
            margin-bottom: 12px;
            font-size: 1rem;
        }
        .theory-section p {
            line-height: 1.8;
            margin-bottom: 12px;
            font-size: 0.9rem;
        }
        .formula {
            background: rgba(0, 212, 255, 0.1);
            padding: 10px 14px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 12px 0;
            border-left: 3px solid #00d4ff;
            font-size: 0.9rem;
        }
        .theory-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
            font-size: 0.85rem;
        }
        .theory-table th {
            padding: 10px;
            text-align: left;
            color: #00d4ff;
            border-bottom: 2px solid #00d4ff;
        }
        .theory-table td {
            padding: 10px;
            border-bottom: 1px solid #333;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .input-row {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš™ï¸ ê¸°ì–´ë“œ ëª¨í„° ì„¤ê³„ ê³„ì‚°ê¸°</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('calculator')">ì„¤ê³„ ê³„ì‚°</button>
            <button class="tab" onclick="showTab('theory')">ì´ë¡  ì„¤ëª…</button>
        </div>

        <!-- ê³„ì‚°ê¸° íƒ­ -->
        <div id="calculator-tab">
            <div class="grid">
                <!-- ëª¨í„° ì‚¬ì–‘ ì…ë ¥ -->
                <div class="card">
                    <h2 class="card-title">ğŸ”Œ DC ëª¨í„° ì‚¬ì–‘</h2>
                    
                    <div class="preset-container">
                        <label>í”„ë¦¬ì…‹ ì„ íƒ:</label>
                        <div class="preset-buttons">
                            <button class="preset-btn active" onclick="applyPreset('FA-130')">FA-130</button>
                            <button class="preset-btn" onclick="applyPreset('RE-260')">RE-260</button>
                            <button class="preset-btn" onclick="applyPreset('RS-385')">RS-385</button>
                            <button class="preset-btn" onclick="applyPreset('RS-540')">RS-540</button>
                            <button class="preset-btn" onclick="applyPreset('RS-775')">RS-775</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>ëª¨í„° ì´ë¦„</label>
                        <input type="text" id="motorName" value="FA-130 (3V)" oninput="calculate()">
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label>ì •ê²© ì „ì•• (V)</label>
                            <input type="number" id="voltage" step="0.1" value="3.0" oninput="calculate()">
                        </div>
                        <div class="input-group">
                            <label>ë¬´ë¶€í•˜ íšŒì „ìˆ˜ (RPM)</label>
                            <input type="number" id="rpmNoLoad" value="9600" oninput="calculate()">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label>ë¬´ë¶€í•˜ ì „ë¥˜ (A)</label>
                            <input type="number" id="currentNoLoad" step="0.01" value="0.15" oninput="calculate()">
                        </div>
                        <div class="input-group">
                            <label>ì •ì§€(ìŠ¤í†¨) ì „ë¥˜ (A)</label>
                            <input type="number" id="currentStall" step="0.1" value="2.2" oninput="calculate()">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>ì •ì§€ í† í¬ (mNm)</label>
                        <input type="number" id="torqueStall" step="0.1" value="11.8" oninput="calculate()">
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label>ì§ê²½ (mm)</label>
                            <input type="number" id="diameter" step="0.1" value="20.4" oninput="calculate()">
                        </div>
                        <div class="input-group">
                            <label>ê¸¸ì´ (mm)</label>
                            <input type="number" id="length" step="0.1" value="25.1" oninput="calculate()">
                        </div>
                    </div>

                    <div class="result-section">
                        <h4>ê³„ì‚°ëœ ëª¨í„° ìƒìˆ˜</h4>
                        <div class="result-item">
                            <span class="result-label">ì—­ê¸°ì „ë ¥ ìƒìˆ˜ Ke</span>
                            <span class="result-value" id="Ke">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">í† í¬ ìƒìˆ˜ Kt</span>
                            <span class="result-value" id="Kt">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">ì „ê¸°ì ì €í•­ Ra</span>
                            <span class="result-value" id="Ra">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">ìµœëŒ€ ì¶œë ¥</span>
                            <span class="result-value" id="powerMax">-</span>
                        </div>
                    </div>
                </div>

                <!-- ëª©í‘œ ì‚¬ì–‘ -->
                <div class="card">
                    <h2 class="card-title">ğŸ¯ ëª©í‘œ ì‚¬ì–‘</h2>

                    <div class="input-row">
                        <div class="input-group">
                            <label>ëª©í‘œ ì¶œë ¥ íšŒì „ìˆ˜ (RPM)</label>
                            <input type="number" id="targetRpm" value="100" oninput="calculate()">
                        </div>
                        <div class="input-group">
                            <label>ëª©í‘œ ì¶œë ¥ í† í¬ (mNm)</label>
                            <input type="number" id="targetTorque" value="500" oninput="calculate()">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>ê¸°ì–´ ì¢…ë¥˜</label>
                        <select id="gearType" onchange="calculate()">
                            <option value="spur">í‰ê¸°ì–´ (Spur) - íš¨ìœ¨ 98%, ìµœëŒ€ë¹„ 6:1</option>
                            <option value="helical">í—¬ë¦¬ì»¬ (Helical) - íš¨ìœ¨ 97%, ìµœëŒ€ë¹„ 8:1</option>
                            <option value="planetary">ìœ ì„±ê¸°ì–´ (Planetary) - íš¨ìœ¨ 97%, ìµœëŒ€ë¹„ 10:1</option>
                            <option value="worm">ì›œê¸°ì–´ (Worm) - íš¨ìœ¨ 75%, ìµœëŒ€ë¹„ 60:1</option>
                            <option value="bevel">ë² ë²¨ (Bevel) - íš¨ìœ¨ 96%, ìµœëŒ€ë¹„ 5:1</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>ëª¨í„° íš¨ìœ¨ (%)</label>
                        <input type="number" id="motorEfficiency" min="50" max="100" value="85" oninput="calculate()">
                    </div>

                    <div class="result-section" style="background: rgba(0, 212, 255, 0.1);">
                        <h4>ëª©í‘œ ì¶œë ¥</h4>
                        <div class="result-item">
                            <span class="result-label">í•„ìš” ì¶œë ¥</span>
                            <span class="result-value" id="targetPower">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">í•„ìš” ê¸°ì–´ë¹„</span>
                            <span class="result-value" id="requiredRatio">-</span>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h4>í† í¬-ì†ë„ íŠ¹ì„±</h4>
                        <canvas id="chartCanvas"></canvas>
                        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 10px; font-size: 0.8rem;">
                            <span style="color: #00d4ff;">â— íšŒì „ìˆ˜ (RPM)</span>
                            <span style="color: #00ff88;">â— ì¶œë ¥ (W)</span>
                            <span style="color: #ff6b6b;">â”‚ ë™ì‘ì </span>
                        </div>
                    </div>
                </div>

                <!-- ê¸°ì–´ ì„¤ê³„ ê²°ê³¼ -->
                <div class="card">
                    <h2 class="card-title">âš™ï¸ ê¸°ì–´ íŠ¸ë ˆì¸ ì„¤ê³„</h2>
                    
                    <div id="gearError" class="hidden" style="color: #ff6b6b; padding: 20px; text-align: center;">
                    </div>
                    
                    <div id="gearResults">
                        <div class="result-item">
                            <span class="result-label">ê¸°ì–´ ì¢…ë¥˜</span>
                            <span class="result-value" id="gearTypeName">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">ê¸°ì–´ ë‹¨ìˆ˜</span>
                            <span class="result-value" id="numStages">-</span>
                        </div>

                        <div class="gear-visual" id="gearVisual">
                        </div>

                        <div id="stagesContainer">
                        </div>
                    </div>
                </div>

                <!-- ì„±ëŠ¥ ë¶„ì„ -->
                <div class="card">
                    <h2 class="card-title">ğŸ“Š ì„±ëŠ¥ ë¶„ì„</h2>

                    <div id="performanceResults">
                        <div class="result-section">
                            <h4>ê¸°ì–´ ì‹œìŠ¤í…œ</h4>
                            <div class="result-item">
                                <span class="result-label">ì´ ê¸°ì–´ë¹„</span>
                                <span class="result-value" id="totalRatio">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ì´ ê¸°ì–´ íš¨ìœ¨</span>
                                <span class="result-value" id="totalGearEff">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ì‹œìŠ¤í…œ íš¨ìœ¨</span>
                                <span class="result-value" id="systemEff">-</span>
                            </div>
                        </div>

                        <div class="result-section">
                            <h4>ëª¨í„° ë™ì‘ì </h4>
                            <div class="result-item">
                                <span class="result-label">í•„ìš” ëª¨í„° í† í¬</span>
                                <span class="result-value" id="reqMotorTorque">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ëª¨í„° íšŒì „ìˆ˜</span>
                                <span class="result-value" id="motorRpm">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ëª¨í„° ì „ë¥˜</span>
                                <span class="result-value" id="motorCurrent">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">í† í¬ ë§ˆì§„</span>
                                <span class="result-value" id="torqueMargin">-</span>
                            </div>
                        </div>

                        <div class="result-section">
                            <h4>ì¶œë ¥ ì„±ëŠ¥</h4>
                            <div class="result-item">
                                <span class="result-label">ì¶œë ¥ íšŒì „ìˆ˜</span>
                                <span class="result-value" id="outputRpm">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ì¶œë ¥ í† í¬</span>
                                <span class="result-value" id="outputTorque">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ì¶œë ¥ íŒŒì›Œ</span>
                                <span class="result-value" id="outputPower">-</span>
                            </div>
                        </div>

                        <div id="statusBadge" class="status-badge status-success">
                            âœ… ì„¤ê³„ ê°€ëŠ¥
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì´ë¡  íƒ­ -->
        <div id="theory-tab" class="hidden">
            <div class="card">
                <h2 class="card-title">ğŸ“š ê¸°ì–´ë“œ ëª¨í„° ì„¤ê³„ ì´ë¡ </h2>

                <div class="theory-section">
                    <h3>1. DC ëª¨í„° ê¸°ë³¸ íŠ¹ì„±</h3>
                    <p>DC ëª¨í„°ëŠ” ì „ê¸° ì—ë„ˆì§€ë¥¼ ê¸°ê³„ì  íšŒì „ ì—ë„ˆì§€ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ëª¨í„°ì˜ íŠ¹ì„±ì€ ëª‡ ê°€ì§€ í•µì‹¬ ìƒìˆ˜ë¡œ ê²°ì •ë©ë‹ˆë‹¤.</p>
                    
                    <div class="formula">
                        <strong>ì—­ê¸°ì „ë ¥ (Back-EMF):</strong> E = Ke Ã— Ï‰
                    </div>
                    <p>ëª¨í„°ê°€ íšŒì „í•˜ë©´ ì—­ë°©í–¥ ì „ì••ì´ ë°œìƒí•©ë‹ˆë‹¤. KeëŠ” ì—­ê¸°ì „ë ¥ ìƒìˆ˜ [V/(rad/s)]ì…ë‹ˆë‹¤.</p>

                    <div class="formula">
                        <strong>í† í¬ ìƒì„±:</strong> T = Kt Ã— I
                    </div>
                    <p>ì „ë¥˜ì— ë¹„ë¡€í•˜ì—¬ í† í¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. KtëŠ” í† í¬ ìƒìˆ˜ [Nm/A]ì…ë‹ˆë‹¤. ì´ìƒì ìœ¼ë¡œ Ke = Kt (SI ë‹¨ìœ„ê³„).</p>

                    <div class="formula">
                        <strong>í† í¬-ì†ë„ ê´€ê³„:</strong> Ï‰ = Ï‰_no_load Ã— (1 - T/T_stall)
                    </div>
                    <p>DC ëª¨í„°ëŠ” ì„ í˜•ì ì¸ í† í¬-ì†ë„ íŠ¹ì„±ì„ ê°€ì§‘ë‹ˆë‹¤. í† í¬ê°€ ì¦ê°€í•˜ë©´ ì†ë„ê°€ ê°ì†Œí•©ë‹ˆë‹¤.</p>
                    
                    <p><strong>ìµœëŒ€ íš¨ìœ¨ì :</strong> ì •ì§€ í† í¬ì˜ ì•½ 50% ì§€ì <br>
                    <strong>ìµœëŒ€ ì¶œë ¥ì :</strong> ì •ì§€ í† í¬ì˜ ì•½ 50% ì§€ì  (ì†ë„ë„ 50%)</p>
                </div>

                <div class="theory-section">
                    <h3>2. ê¸°ì–´ ê°ì† ì›ë¦¬</h3>
                    <p>ê¸°ì–´ëŠ” ì†ë„ì™€ í† í¬ë¥¼ ë³€í™˜í•˜ëŠ” ê¸°ê³„ ìš”ì†Œì…ë‹ˆë‹¤. ì—ë„ˆì§€ëŠ” ë³´ì¡´ë˜ë¯€ë¡œ ì†ë„ê°€ ê°ì†Œí•˜ë©´ í† í¬ê°€ ì¦ê°€í•©ë‹ˆë‹¤.</p>

                    <div class="formula">
                        <strong>ê¸°ì–´ë¹„:</strong> G = N_í”¼ë™ / N_êµ¬ë™ = í”¼ë™ê¸°ì–´ ì‡ìˆ˜ / êµ¬ë™ê¸°ì–´ ì‡ìˆ˜
                    </div>

                    <div class="formula">
                        <strong>ì†ë„ ë³€í™˜:</strong> Ï‰_out = Ï‰_in / G
                    </div>
                    <p>G > 1ì´ë©´ ê°ì†(ì†ë„ ê°ì†Œ), G < 1ì´ë©´ ì¦ì†(ì†ë„ ì¦ê°€)</p>

                    <div class="formula">
                        <strong>í† í¬ ë³€í™˜:</strong> T_out = T_in Ã— G Ã— Î·
                    </div>
                    <p>Î·ëŠ” ê¸°ì–´ íš¨ìœ¨ (0 < Î· < 1). ê°ì† ì‹œ í† í¬ê°€ ì¦ê°€í•©ë‹ˆë‹¤ (í˜ ì¦í­).</p>
                    
                    <div class="formula">
                        <strong>ì¶œë ¥ ë³´ì¡´:</strong> P_out = P_in Ã— Î·<br>
                        T_out Ã— Ï‰_out = (T_in Ã— Ï‰_in) Ã— Î·
                    </div>
                </div>

                <div class="theory-section">
                    <h3>3. ë‹¤ë‹¨ ê¸°ì–´ ì‹œìŠ¤í…œ</h3>
                    <p>í° ê¸°ì–´ë¹„ê°€ í•„ìš”í•œ ê²½ìš° ì—¬ëŸ¬ ë‹¨ì˜ ê¸°ì–´ë¥¼ ì§ë ¬ ì—°ê²°í•©ë‹ˆë‹¤.</p>

                    <div class="formula">
                        <strong>ì´ ê¸°ì–´ë¹„:</strong> G_total = G1 Ã— G2 Ã— G3 Ã— ...
                    </div>
                    <div class="formula">
                        <strong>ì´ íš¨ìœ¨:</strong> Î·_total = Î·1 Ã— Î·2 Ã— Î·3 Ã— ...
                    </div>

                    <p><strong>ì˜ˆì‹œ:</strong> 100:1 ê°ì†ì´ í•„ìš”í•œ ê²½ìš°</p>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li>ë‹¨ì¼ ë‹¨: 100:1 (ë¹„ì‹¤ìš©ì , ê¸°ì–´ê°€ ë„ˆë¬´ í¼)</li>
                        <li>3ë‹¨: 4.64:1 Ã— 4.64:1 Ã— 4.64:1 â‰ˆ 100:1</li>
                    </ul>
                </div>

                <div class="theory-section">
                    <h3>4. ê¸°ì–´ ì¢…ë¥˜ë³„ íŠ¹ì„±</h3>
                    <table class="theory-table">
                        <thead>
                            <tr>
                                <th>ê¸°ì–´ ì¢…ë¥˜</th>
                                <th>íš¨ìœ¨</th>
                                <th>ìµœëŒ€ ê¸°ì–´ë¹„</th>
                                <th>íŠ¹ì§•</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>í‰ê¸°ì–´ (Spur)</td>
                                <td>~98%</td>
                                <td>6:1</td>
                                <td>ë‹¨ìˆœ, ì €ë ´, ì†ŒìŒ ìˆìŒ</td>
                            </tr>
                            <tr>
                                <td>í—¬ë¦¬ì»¬ (Helical)</td>
                                <td>~97%</td>
                                <td>8:1</td>
                                <td>ì €ì†ŒìŒ, ì¶•ë°©í–¥ í•˜ì¤‘ ë°œìƒ</td>
                            </tr>
                            <tr>
                                <td>ìœ ì„±ê¸°ì–´ (Planetary)</td>
                                <td>~97%</td>
                                <td>10:1</td>
                                <td>ì»´íŒ©íŠ¸, ë™ì¶•, ê³ í† í¬</td>
                            </tr>
                            <tr>
                                <td>ì›œê¸°ì–´ (Worm)</td>
                                <td>~75%</td>
                                <td>60:1</td>
                                <td>ìê¸°ì ê¸ˆ ê°€ëŠ¥, í° ê°ì†ë¹„</td>
                            </tr>
                            <tr>
                                <td>ë² ë²¨ (Bevel)</td>
                                <td>~96%</td>
                                <td>5:1</td>
                                <td>ì¶• ë°©í–¥ ë³€ê²½ ê°€ëŠ¥</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="theory-section">
                    <h3>5. ê¸°ì–´ ì¹˜ìˆ˜ ì„¤ê³„</h3>
                    <div class="formula">
                        <strong>í”¼ì¹˜ì› ì§ê²½:</strong> d = m Ã— z (m: ëª¨ë“ˆ, z: ì‡ìˆ˜)
                    </div>
                    <div class="formula">
                        <strong>ì´ëì› ì§ê²½:</strong> da = d + 2m
                    </div>
                    <div class="formula">
                        <strong>ì´ë¿Œë¦¬ì› ì§ê²½:</strong> df = d - 2.5m
                    </div>
                    <div class="formula">
                        <strong>ì¤‘ì‹¬ê±°ë¦¬:</strong> a = m Ã— (z1 + z2) / 2
                    </div>
                    <p>ëª¨ë“ˆ(m)ì€ ê¸°ì–´ í¬ê¸°ì˜ ê¸°ì¤€ì´ ë˜ëŠ” ê°’ìœ¼ë¡œ, í‘œì¤€í™”ëœ ê°’(0.3, 0.5, 0.8, 1.0, 1.5, 2.0...)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                    <p>ìµœì†Œ ì‡ìˆ˜ëŠ” ì¼ë°˜ì ìœ¼ë¡œ 12~18ì¹˜ë¡œ, ì–¸ë”ì»·ì„ ë°©ì§€í•©ë‹ˆë‹¤.</p>
                </div>

                <div class="theory-section">
                    <h3>6. ì„¤ê³„ ì‹œ ê³ ë ¤ì‚¬í•­</h3>
                    <ul style="margin-left: 20px; line-height: 2;">
                        <li><strong>í† í¬ ë§ˆì§„:</strong> ì •ì§€ í† í¬ì˜ 80% ì´í•˜ì—ì„œ ìš´ì „ ê¶Œì¥</li>
                        <li><strong>ì—´ ê´€ë¦¬:</strong> ì—°ì† ìš´ì „ ì‹œ ëª¨í„° ë°œì—´ ê³ ë ¤</li>
                        <li><strong>ë°±ë˜ì‹œ:</strong> ì •ë°€ ìœ„ì¹˜ ì œì–´ ì‹œ ì¤‘ìš” (ë³´í†µ 0.1~0.3Â°)</li>
                        <li><strong>ê´€ì„± ë§¤ì¹­:</strong> ë¶€í•˜ ê´€ì„±ê³¼ ëª¨í„° ê´€ì„±ì˜ ìµœì  ë¹„ìœ¨ (1:1 ~ 10:1)</li>
                        <li><strong>ê³µì§„ íšŒí”¼:</strong> ì‹œìŠ¤í…œ ê³ ìœ ì§„ë™ìˆ˜ë¥¼ í”¼í•´ ì„¤ê³„</li>
                        <li><strong>ìœ¤í™œ:</strong> ê¸°ì–´ ìˆ˜ëª…ê³¼ íš¨ìœ¨ì— í° ì˜í–¥</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ëª¨í„° í”„ë¦¬ì…‹
        const MOTOR_PRESETS = {
            'FA-130': {
                name: 'FA-130 (3V)',
                voltage: 3.0,
                currentNoLoad: 0.15,
                currentStall: 2.2,
                rpmNoLoad: 9600,
                torqueStall: 11.8,
                diameter: 20.4,
                length: 25.1
            },
            'RE-260': {
                name: 'RE-260 (3V)',
                voltage: 3.0,
                currentNoLoad: 0.12,
                currentStall: 1.8,
                rpmNoLoad: 8000,
                torqueStall: 15.0,
                diameter: 24.0,
                length: 28.0
            },
            'RS-385': {
                name: 'RS-385 (12V)',
                voltage: 12.0,
                currentNoLoad: 0.08,
                currentStall: 3.8,
                rpmNoLoad: 7400,
                torqueStall: 98.0,
                diameter: 28.0,
                length: 38.0
            },
            'RS-540': {
                name: 'RS-540 (12V)',
                voltage: 12.0,
                currentNoLoad: 0.45,
                currentStall: 18.0,
                rpmNoLoad: 19000,
                torqueStall: 470.0,
                diameter: 36.0,
                length: 50.0
            },
            'RS-775': {
                name: 'RS-775 (12V)',
                voltage: 12.0,
                currentNoLoad: 0.7,
                currentStall: 40.0,
                rpmNoLoad: 18500,
                torqueStall: 1200.0,
                diameter: 44.0,
                length: 66.0
            }
        };

        // ê¸°ì–´ ì„¤ì •
        const GEAR_CONFIG = {
            spur: { efficiency: 0.98, maxRatio: 6, name: 'í‰ê¸°ì–´ (Spur)' },
            helical: { efficiency: 0.97, maxRatio: 8, name: 'í—¬ë¦¬ì»¬ (Helical)' },
            planetary: { efficiency: 0.97, maxRatio: 10, name: 'ìœ ì„±ê¸°ì–´ (Planetary)' },
            worm: { efficiency: 0.75, maxRatio: 60, name: 'ì›œê¸°ì–´ (Worm)' },
            bevel: { efficiency: 0.96, maxRatio: 5, name: 'ë² ë²¨ (Bevel)' }
        };

        const STANDARD_MODULES = [0.3, 0.4, 0.5, 0.6, 0.8, 1.0, 1.25, 1.5, 2.0, 2.5, 3.0];

        // íƒ­ ì „í™˜
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('calculator-tab').classList.toggle('hidden', tabName !== 'calculator');
            document.getElementById('theory-tab').classList.toggle('hidden', tabName !== 'theory');
        }

        // í”„ë¦¬ì…‹ ì ìš©
        function applyPreset(presetName) {
            const preset = MOTOR_PRESETS[presetName];
            if (!preset) return;

            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            document.getElementById('motorName').value = preset.name;
            document.getElementById('voltage').value = preset.voltage;
            document.getElementById('currentNoLoad').value = preset.currentNoLoad;
            document.getElementById('currentStall').value = preset.currentStall;
            document.getElementById('rpmNoLoad').value = preset.rpmNoLoad;
            document.getElementById('torqueStall').value = preset.torqueStall;
            document.getElementById('diameter').value = preset.diameter;
            document.getElementById('length').value = preset.length;

            calculate();
        }

        // ê°’ ê°€ì ¸ì˜¤ê¸°
        function getVal(id) {
            return parseFloat(document.getElementById(id).value) || 0;
        }

        // ê³„ì‚° í•¨ìˆ˜
        function calculate() {
            // ëª¨í„° ê°’
            const voltage = getVal('voltage');
            const currentNoLoad = getVal('currentNoLoad');
            const currentStall = getVal('currentStall');
            const rpmNoLoad = getVal('rpmNoLoad');
            const torqueStall = getVal('torqueStall');
            
            // ëª©í‘œ ê°’
            const targetRpm = getVal('targetRpm');
            const targetTorque = getVal('targetTorque');
            const gearType = document.getElementById('gearType').value;
            const motorEfficiency = getVal('motorEfficiency') / 100;

            // ëª¨í„° ìƒìˆ˜ ê³„ì‚°
            const omegaNoLoad = rpmNoLoad * 2 * Math.PI / 60;
            const torqueStallNm = torqueStall / 1000;
            const Ke = voltage / omegaNoLoad * 1000;
            const Kt = torqueStallNm / currentStall * 1000;
            const Ra = voltage / currentStall;
            const powerMax = (torqueStallNm / 4) * (omegaNoLoad / 2);

            document.getElementById('Ke').textContent = Ke.toFixed(3) + ' mV/(rad/s)';
            document.getElementById('Kt').textContent = Kt.toFixed(3) + ' mNm/A';
            document.getElementById('Ra').textContent = Ra.toFixed(2) + ' Î©';
            document.getElementById('powerMax').textContent = powerMax.toFixed(3) + ' W';

            // ëª©í‘œ ì¶œë ¥
            const targetPower = (targetTorque / 1000) * (targetRpm * 2 * Math.PI / 60);
            const requiredRatio = rpmNoLoad / targetRpm;

            document.getElementById('targetPower').textContent = targetPower.toFixed(3) + ' W';
            document.getElementById('requiredRatio').textContent = requiredRatio.toFixed(2) + ':1';

            // ê¸°ì–´ ì„¤ê³„
            const gearConfig = GEAR_CONFIG[gearType];
            
            if (requiredRatio < 1) {
                document.getElementById('gearError').classList.remove('hidden');
                document.getElementById('gearError').textContent = 'âš ï¸ ì¦ì†ì´ í•„ìš”í•©ë‹ˆë‹¤. ë” ëŠë¦° ëª¨í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”.';
                document.getElementById('gearResults').style.opacity = '0.3';
                return;
            }
            
            document.getElementById('gearError').classList.add('hidden');
            document.getElementById('gearResults').style.opacity = '1';

            // ë‹¨ìˆ˜ ê³„ì‚°
            let numStages = Math.max(1, Math.ceil(Math.log(requiredRatio) / Math.log(gearConfig.maxRatio)));
            let ratioPerStage = Math.pow(requiredRatio, 1 / numStages);

            while (ratioPerStage > gearConfig.maxRatio && numStages < 5) {
                numStages++;
                ratioPerStage = Math.pow(requiredRatio, 1 / numStages);
            }

            document.getElementById('gearTypeName').textContent = gearConfig.name;
            document.getElementById('numStages').textContent = numStages + 'ë‹¨';

            // ê° ë‹¨ ì„¤ê³„
            const stages = [];
            let stagesHtml = '';
            let visualHtml = '<div class="gear" style="width:30px;height:30px;font-size:0.6rem;">M</div><div class="shaft"></div>';

            for (let i = 0; i < numStages; i++) {
                const teethDriving = 18;
                const teethDriven = Math.round(teethDriving * ratioPerStage);
                const actualRatio = teethDriven / teethDriving;
                const moduleIndex = Math.min(2 + i, STANDARD_MODULES.length - 1);
                const module = STANDARD_MODULES[moduleIndex];
                const pcdDriving = module * teethDriving;
                const pcdDriven = module * teethDriven;

                stages.push({
                    ratio: actualRatio,
                    efficiency: gearConfig.efficiency,
                    teethDriving,
                    teethDriven,
                    module,
                    pcdDriving,
                    pcdDriven
                });

                stagesHtml += `
                    <div class="gear-stage">
                        <div class="gear-stage-title">Stage ${i + 1}</div>
                        <div class="result-item">
                            <span class="result-label">ê¸°ì–´ë¹„</span>
                            <span class="result-value">${actualRatio.toFixed(2)}:1</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">ì‡ìˆ˜</span>
                            <span class="result-value">${teethDriving}ì¹˜ / ${teethDriven}ì¹˜</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">ëª¨ë“ˆ</span>
                            <span class="result-value">${module} mm</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">PCD</span>
                            <span class="result-value">${pcdDriving.toFixed(1)} / ${pcdDriven.toFixed(1)} mm</span>
                        </div>
                    </div>
                `;

                const size1 = Math.min(20 + pcdDriving * 0.8, 50);
                const size2 = Math.min(20 + pcdDriven * 0.5, 70);
                visualHtml += `
                    <div class="gear" style="width:${size1}px;height:${size1}px;">${teethDriving}</div>
                    <div class="gear" style="width:${size2}px;height:${size2}px;">${teethDriven}</div>
                `;
                if (i < numStages - 1) {
                    visualHtml += '<div class="shaft"></div>';
                }
            }

            document.getElementById('stagesContainer').innerHTML = stagesHtml;
            document.getElementById('gearVisual').innerHTML = visualHtml;

            // ì„±ëŠ¥ ë¶„ì„
            const totalRatio = stages.reduce((acc, s) => acc * s.ratio, 1);
            const totalGearEff = stages.reduce((acc, s) => acc * s.efficiency, 1);
            const totalEff = totalGearEff * motorEfficiency;

            const targetTorqueNm = targetTorque / 1000;
            const reqMotorTorque = targetTorqueNm / (totalRatio * totalEff);
            const torqueRatio = reqMotorTorque / torqueStallNm;
            const motorRpm = rpmNoLoad * (1 - torqueRatio);
            const motorCurrent = currentNoLoad + (currentStall - currentNoLoad) * torqueRatio;
            const outputRpm = motorRpm / totalRatio;
            const outputTorqueNm = reqMotorTorque * totalRatio * totalEff;
            const outputPower = outputTorqueNm * (outputRpm * 2 * Math.PI / 60);
            const torqueMargin = (torqueStallNm - reqMotorTorque) / torqueStallNm * 100;
            const feasible = reqMotorTorque <= torqueStallNm * 0.8;

            document.getElementById('totalRatio').textContent = totalRatio.toFixed(2) + ':1';
            document.getElementById('totalGearEff').textContent = (totalGearEff * 100).toFixed(1) + '%';
            document.getElementById('systemEff').textContent = (totalEff * 100).toFixed(1) + '%';

            document.getElementById('reqMotorTorque').textContent = (reqMotorTorque * 1000).toFixed(2) + ' mNm';
            document.getElementById('motorRpm').textContent = motorRpm.toFixed(0) + ' RPM';
            document.getElementById('motorCurrent').textContent = motorCurrent.toFixed(3) + ' A';
            
            const marginEl = document.getElementById('torqueMargin');
            marginEl.textContent = torqueMargin.toFixed(1) + '%';
            marginEl.className = 'result-value' + (torqueMargin < 20 ? ' warning' : '');

            document.getElementById('outputRpm').textContent = outputRpm.toFixed(1) + ' RPM';
            document.getElementById('outputTorque').textContent = (outputTorqueNm * 1000).toFixed(2) + ' mNm';
            document.getElementById('outputPower').textContent = outputPower.toFixed(3) + ' W';

            const statusBadge = document.getElementById('statusBadge');
            if (feasible) {
                statusBadge.className = 'status-badge status-success';
                statusBadge.textContent = 'âœ… ì„¤ê³„ ê°€ëŠ¥ - ëª©í‘œ ì„±ëŠ¥ ë‹¬ì„± ê°€ëŠ¥';
            } else {
                statusBadge.className = 'status-badge status-fail';
                statusBadge.textContent = 'âŒ ì„¤ê³„ ë¶ˆê°€ - ë” ê°•ë ¥í•œ ëª¨í„° í•„ìš”';
            }

            // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
            drawChart(rpmNoLoad, torqueStall, reqMotorTorque * 1000);
        }

        // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
        function drawChart(rpmNoLoad, torqueStall, operatingTorque) {
            const canvas = document.getElementById('chartCanvas');
            const ctx = canvas.getContext('2d');
            
            // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width - 32;
            canvas.height = 200;
            
            const w = canvas.width;
            const h = canvas.height;
            const padding = { top: 20, right: 60, bottom: 30, left: 50 };
            const chartW = w - padding.left - padding.right;
            const chartH = h - padding.top - padding.bottom;

            // ë°°ê²½
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, w, h);

            // ê·¸ë¦¬ë“œ
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 0.5;
            for (let i = 0; i <= 5; i++) {
                const x = padding.left + (chartW / 5) * i;
                const y = padding.top + (chartH / 5) * i;
                ctx.beginPath();
                ctx.moveTo(x, padding.top);
                ctx.lineTo(x, h - padding.bottom);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(padding.left, y);
                ctx.lineTo(w - padding.right, y);
                ctx.stroke();
            }

            // ë°ì´í„° ê³„ì‚°
            const torqueStallNm = torqueStall / 1000;
            let maxPower = 0;
            const points = [];
            for (let i = 0; i <= 100; i += 2) {
                const torque = torqueStall * (i / 100);
                const rpm = rpmNoLoad * (1 - i / 100);
                const power = (torque / 1000) * (rpm * 2 * Math.PI / 60);
                if (power > maxPower) maxPower = power;
                points.push({ torque, rpm, power });
            }

            // ìŠ¤ì¼€ì¼
            const xScale = (t) => padding.left + (t / torqueStall) * chartW;
            const yScaleRpm = (r) => padding.top + (1 - r / rpmNoLoad) * chartH;
            const yScalePower = (p) => padding.top + (1 - p / maxPower) * chartH;

            // RPM ì„  ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            points.forEach((p, i) => {
                const x = xScale(p.torque);
                const y = yScaleRpm(p.rpm);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();

            // ì¶œë ¥ ì„  ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 2;
            ctx.beginPath();
            points.forEach((p, i) => {
                const x = xScale(p.torque);
                const y = yScalePower(p.power);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();

            // ë™ì‘ì  í‘œì‹œ
            if (operatingTorque > 0 && operatingTorque <= torqueStall) {
                const opX = xScale(operatingTorque);
                ctx.strokeStyle = '#ff6b6b';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(opX, padding.top);
                ctx.lineTo(opX, h - padding.bottom);
                ctx.stroke();
                ctx.setLineDash([]);
            }

            // ì¶• ë ˆì´ë¸”
            ctx.fillStyle = '#888';
            ctx.font = '11px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('í† í¬ (mNm)', w / 2, h - 5);
            
            ctx.fillStyle = '#00d4ff';
            ctx.textAlign = 'right';
            ctx.fillText('RPM', padding.left - 5, padding.top + 10);
            
            ctx.fillStyle = '#00ff88';
            ctx.textAlign = 'left';
            ctx.fillText('W', w - padding.right + 5, padding.top + 10);

            // ì¶• ê°’
            ctx.fillStyle = '#666';
            ctx.font = '10px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('0', padding.left, h - padding.bottom + 15);
            ctx.fillText(torqueStall.toFixed(0), w - padding.right, h - padding.bottom + 15);
            
            ctx.textAlign = 'right';
            ctx.fillText(rpmNoLoad.toFixed(0), padding.left - 5, padding.top + 4);
            ctx.fillText('0', padding.left - 5, h - padding.bottom + 4);
        }

        // ì´ˆê¸° ê³„ì‚°
        window.onload = function() {
            calculate();
            window.addEventListener('resize', calculate);
        };
    </script>
</body>
</html>
