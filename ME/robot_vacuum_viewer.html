<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œë´‡ ì²­ì†Œê¸° 3D ëª¨ë¸ ë·°ì–´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            text-align: center;
            padding: 30px 0;
        }
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        header p {
            color: #888;
            font-size: 1.1rem;
        }
        .viewer-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        .viewer-main {
            flex: 1;
            background: #0f0f23;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        #canvas-container {
            width: 100%;
            height: 600px;
            position: relative;
        }
        canvas {
            display: block;
        }
        .controls {
            padding: 20px;
            background: #1a1a2e;
            border-top: 1px solid #333;
        }
        .control-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .control-group label {
            font-size: 0.9rem;
            color: #aaa;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            color: #fff;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,210,255,0.4);
        }
        .btn-secondary {
            background: #333;
            color: #fff;
        }
        .btn-secondary:hover {
            background: #444;
        }
        .sidebar {
            width: 320px;
            background: #0f0f23;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .sidebar h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #00d2ff;
        }
        .spec-list {
            list-style: none;
        }
        .spec-list li {
            padding: 12px 0;
            border-bottom: 1px solid #222;
            display: flex;
            justify-content: space-between;
        }
        .spec-list li:last-child {
            border-bottom: none;
        }
        .spec-label {
            color: #888;
        }
        .spec-value {
            font-weight: 600;
            color: #fff;
        }
        .color-picker {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        .color-option:hover, .color-option.active {
            border-color: #00d2ff;
            transform: scale(1.1);
        }
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #333;
            border-top-color: #00d2ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .info-box {
            margin-top: 20px;
            padding: 15px;
            background: #1a1a2e;
            border-radius: 10px;
            border-left: 3px solid #00d2ff;
        }
        .info-box h4 {
            margin-bottom: 10px;
            color: #00d2ff;
        }
        .info-box p {
            font-size: 0.9rem;
            color: #888;
            line-height: 1.6;
        }
        .download-section {
            margin-top: 20px;
        }
        .download-btn {
            display: block;
            width: 100%;
            padding: 15px;
            text-align: center;
            text-decoration: none;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¤– ë¡œë´‡ ì²­ì†Œê¸° 3D ëª¨ë¸</h1>
            <p>Mid-range Robot Vacuum Cleaner | Ã˜350 Ã— H98mm</p>
        </header>
        
        <div class="viewer-container">
            <div class="viewer-main">
                <div id="canvas-container">
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p style="margin-top: 15px;">3D ëª¨ë¸ ë¡œë”©ì¤‘...</p>
                    </div>
                </div>
                <div class="controls">
                    <div class="control-row">
                        <button class="btn-primary" onclick="resetCamera()">ğŸ”„ ë·° ë¦¬ì…‹</button>
                        <button class="btn-secondary" onclick="toggleWireframe()">ğŸ“ ì™€ì´ì–´í”„ë ˆì„</button>
                        <button class="btn-secondary" onclick="toggleAutoRotate()">ğŸ”ƒ ìë™ íšŒì „</button>
                        <button class="btn-secondary" onclick="toggleStation()">ğŸ”Œ ìŠ¤í…Œì´ì…˜ í‘œì‹œ</button>
                        <div class="control-group">
                            <label>ë°°ê²½:</label>
                            <input type="color" id="bgColor" value="#0f0f23" onchange="changeBgColor(this.value)">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <h3>ğŸ“‹ ì œí’ˆ ì‚¬ì–‘</h3>
                <ul class="spec-list">
                    <li>
                        <span class="spec-label">í¬ê¸°</span>
                        <span class="spec-value">Ã˜350 Ã— H98mm</span>
                    </li>
                    <li>
                        <span class="spec-label">ë¬´ê²Œ</span>
                        <span class="spec-value">3.8kg</span>
                    </li>
                    <li>
                        <span class="spec-label">í¡ì…ë ¥</span>
                        <span class="spec-value">5,000Pa</span>
                    </li>
                    <li>
                        <span class="spec-label">ë°°í„°ë¦¬</span>
                        <span class="spec-value">5,200mAh</span>
                    </li>
                    <li>
                        <span class="spec-label">ì‚¬ìš©ì‹œê°„</span>
                        <span class="spec-value">180ë¶„</span>
                    </li>
                    <li>
                        <span class="spec-label">ë„¤ë¹„ê²Œì´ì…˜</span>
                        <span class="spec-value">LiDAR + ì¹´ë©”ë¼</span>
                    </li>
                    <li>
                        <span class="spec-label">ë¬¼ê±¸ë ˆ</span>
                        <span class="spec-value">ì „ë™ íšŒì „ì‹</span>
                    </li>
                    <li>
                        <span class="spec-label">ì—°ê²°</span>
                        <span class="spec-value">Wi-Fi / BLE 5.0</span>
                    </li>
                </ul>
                
                <h3 style="margin-top: 25px;">ğŸ¨ ìƒ‰ìƒ ì„ íƒ</h3>
                <div class="color-picker">
                    <div class="color-option active" style="background: #f0f0f0;" onclick="changeColor(0xf0f0f0)"></div>
                    <div class="color-option" style="background: #2c2c2c;" onclick="changeColor(0x2c2c2c)"></div>
                    <div class="color-option" style="background: #1a365d;" onclick="changeColor(0x1a365d)"></div>
                    <div class="color-option" style="background: #742a2a;" onclick="changeColor(0x742a2a)"></div>
                    <div class="color-option" style="background: #22543d;" onclick="changeColor(0x22543d)"></div>
                </div>
                
                <div class="info-box">
                    <h4>ğŸ’¡ ì¡°ì‘ ë°©ë²•</h4>
                    <p>
                        <strong>íšŒì „:</strong> ë§ˆìš°ìŠ¤ ì¢Œí´ë¦­ ë“œë˜ê·¸<br>
                        <strong>ì´ë™:</strong> ë§ˆìš°ìŠ¤ ìš°í´ë¦­ ë“œë˜ê·¸<br>
                        <strong>í™•ëŒ€/ì¶•ì†Œ:</strong> ë§ˆìš°ìŠ¤ íœ 
                    </p>
                </div>
                
                <div class="download-section">
                    <h3 style="margin-bottom: 15px;">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</h3>
                    <a href="robot_vacuum.stl" download class="btn-primary download-btn">
                        ë¡œë´‡ ì²­ì†Œê¸° STL
                    </a>
                    <a href="robot_vacuum_with_station.stl" download class="btn-primary download-btn">
                        ìŠ¤í…Œì´ì…˜ í¬í•¨ STL
                    </a>
                    <a href="robot_vacuum.scad" download class="btn-secondary download-btn">
                        OpenSCAD ì†ŒìŠ¤
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        let scene, camera, renderer, controls;
        let robotGroup, stationGroup;
        let isWireframe = false;
        let isAutoRotate = false;
        let showStation = false;
        let topCoverMaterial;

        function init() {
            const container = document.getElementById('canvas-container');
            const width = container.clientWidth;
            const height = container.clientHeight;

            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0f0f23);

            // Camera
            camera = new THREE.PerspectiveCamera(45, width / height, 1, 5000);
            camera.position.set(400, 300, 400);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(width, height);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            container.appendChild(renderer.domElement);

            // Controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 200;
            controls.maxDistance = 1500;

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(200, 300, 200);
            directionalLight.castShadow = true;
            scene.add(directionalLight);

            const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.3);
            directionalLight2.position.set(-200, 200, -200);
            scene.add(directionalLight2);

            // Create robot vacuum
            createRobotVacuum();
            createChargingStation();

            // Grid
            const gridHelper = new THREE.GridHelper(800, 20, 0x333333, 0x222222);
            scene.add(gridHelper);

            // Hide loading
            document.getElementById('loading').style.display = 'none';

            // Handle resize
            window.addEventListener('resize', onWindowResize);

            animate();
        }

        function createRobotVacuum() {
            robotGroup = new THREE.Group();

            // Materials
            const bodyTopMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xf0f0f0, 
                shininess: 100 
            });
            topCoverMaterial = bodyTopMaterial;
            
            const bodyBottomMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2a2a2a, 
                shininess: 50 
            });
            const bumperMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x3a3a3a, 
                shininess: 30 
            });
            const lidarMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x1a1a1a, 
                shininess: 80 
            });
            const wheelMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x111111, 
                shininess: 20 
            });
            const brushMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xcc3333, 
                shininess: 30 
            });
            const mopMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x6699cc, 
                shininess: 20 
            });
            const contactMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xccaa33, 
                shininess: 100 
            });
            const ledMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x3399ff, 
                emissive: 0x3399ff,
                emissiveIntensity: 0.5 
            });

            // Bottom plate
            const bottomGeom = new THREE.CylinderGeometry(175, 175, 30, 64);
            const bottomMesh = new THREE.Mesh(bottomGeom, bodyBottomMaterial);
            bottomMesh.position.y = 15;
            robotGroup.add(bottomMesh);

            // Top cover (dome)
            const topGeom = new THREE.SphereGeometry(175, 64, 32, 0, Math.PI * 2, 0, Math.PI / 2);
            const topMesh = new THREE.Mesh(topGeom, bodyTopMaterial);
            topMesh.position.y = 30;
            topMesh.scale.y = 0.35;
            robotGroup.add(topMesh);

            // Bumper
            const bumperGeom = new THREE.TorusGeometry(180, 5, 16, 64, Math.PI * 1.3);
            const bumperMesh = new THREE.Mesh(bumperGeom, bumperMaterial);
            bumperMesh.rotation.x = Math.PI / 2;
            bumperMesh.rotation.z = Math.PI * 0.85;
            bumperMesh.position.y = 25;
            robotGroup.add(bumperMesh);

            // LiDAR turret
            const lidarGroup = new THREE.Group();
            
            const lidarBase = new THREE.CylinderGeometry(40, 40, 5, 32);
            const lidarBaseMesh = new THREE.Mesh(lidarBase, lidarMaterial);
            lidarGroup.add(lidarBaseMesh);

            const lidarBody = new THREE.CylinderGeometry(35, 35, 20, 32);
            const lidarBodyMesh = new THREE.Mesh(lidarBody, lidarMaterial);
            lidarBodyMesh.position.y = 12;
            lidarGroup.add(lidarBodyMesh);

            const lidarTop = new THREE.CylinderGeometry(30, 35, 3, 32);
            const lidarTopMesh = new THREE.Mesh(lidarTop, lidarMaterial);
            lidarTopMesh.position.y = 24;
            lidarGroup.add(lidarTopMesh);

            lidarGroup.position.set(0, 75, 30);
            robotGroup.add(lidarGroup);

            // Buttons
            const buttonGeom = new THREE.CylinderGeometry(22, 22, 3, 32);
            const buttonMesh = new THREE.Mesh(buttonGeom, new THREE.MeshPhongMaterial({ 
                color: 0xeeeeee, 
                shininess: 100 
            }));
            buttonMesh.position.set(0, 68, 50);
            robotGroup.add(buttonMesh);

            // LED indicator
            const ledGeom = new THREE.BoxGeometry(40, 2, 8);
            const ledMesh = new THREE.Mesh(ledGeom, ledMaterial);
            ledMesh.position.set(0, 66, 80);
            robotGroup.add(ledMesh);

            // Wheels
            const createWheel = (x, z) => {
                const wheelGroup = new THREE.Group();
                const wheelGeom = new THREE.CylinderGeometry(35, 35, 25, 32);
                const wheelMesh = new THREE.Mesh(wheelGeom, wheelMaterial);
                wheelMesh.rotation.z = Math.PI / 2;
                wheelGroup.add(wheelMesh);
                wheelGroup.position.set(x, 18, z);
                return wheelGroup;
            };

            robotGroup.add(createWheel(-100, -20));
            robotGroup.add(createWheel(100, -20));

            // Caster wheel
            const casterGeom = new THREE.SphereGeometry(15, 16, 16);
            const casterMesh = new THREE.Mesh(casterGeom, wheelMaterial);
            casterMesh.position.set(0, 10, 130);
            robotGroup.add(casterMesh);

            // Main brush
            const brushGeom = new THREE.CylinderGeometry(22, 22, 180, 16);
            const brushMesh = new THREE.Mesh(brushGeom, brushMaterial);
            brushMesh.rotation.z = Math.PI / 2;
            brushMesh.position.set(0, 10, 50);
            robotGroup.add(brushMesh);

            // Side brushes
            const createSideBrush = (x) => {
                const sideGroup = new THREE.Group();
                const hubGeom = new THREE.CylinderGeometry(10, 10, 8, 16);
                const hubMesh = new THREE.Mesh(hubGeom, brushMaterial);
                sideGroup.add(hubMesh);

                for (let i = 0; i < 3; i++) {
                    const armGeom = new THREE.BoxGeometry(50, 2, 8);
                    const armMesh = new THREE.Mesh(armGeom, brushMaterial);
                    armMesh.position.x = 25;
                    armMesh.rotation.y = (i * Math.PI * 2) / 3;
                    sideGroup.add(armMesh);
                }

                sideGroup.position.set(x, 5, 100);
                return sideGroup;
            };

            robotGroup.add(createSideBrush(-120));
            robotGroup.add(createSideBrush(120));

            // Mop pads
            const createMopPad = (x) => {
                const mopGeom = new THREE.CylinderGeometry(60, 60, 8, 32);
                const mopMesh = new THREE.Mesh(mopGeom, mopMaterial);
                mopMesh.position.set(x, 4, -80);
                return mopMesh;
            };

            robotGroup.add(createMopPad(-70));
            robotGroup.add(createMopPad(70));

            // Charging contacts
            const contactGeom = new THREE.BoxGeometry(8, 15, 5);
            const contact1 = new THREE.Mesh(contactGeom, contactMaterial);
            contact1.position.set(-30, 18, -170);
            robotGroup.add(contact1);

            const contact2 = new THREE.Mesh(contactGeom, contactMaterial);
            contact2.position.set(30, 18, -170);
            robotGroup.add(contact2);

            // Dustbin door
            const doorGeom = new THREE.BoxGeometry(95, 8, 75);
            const doorMesh = new THREE.Mesh(doorGeom, bodyTopMaterial);
            doorMesh.position.set(0, 66, -60);
            robotGroup.add(doorMesh);

            scene.add(robotGroup);
        }

        function createChargingStation() {
            stationGroup = new THREE.Group();

            const stationMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2a2a2a, 
                shininess: 50 
            });
            const contactMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xccaa33, 
                shininess: 100 
            });
            const ledMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x33cc33, 
                emissive: 0x33cc33,
                emissiveIntensity: 0.5 
            });

            // Base
            const baseGeom = new THREE.BoxGeometry(150, 20, 100);
            const baseMesh = new THREE.Mesh(baseGeom, stationMaterial);
            baseMesh.position.set(0, 10, -250);
            stationGroup.add(baseMesh);

            // Tower
            const towerGeom = new THREE.BoxGeometry(140, 80, 30);
            const towerMesh = new THREE.Mesh(towerGeom, stationMaterial);
            towerMesh.position.set(0, 50, -290);
            stationGroup.add(towerMesh);

            // Charging contacts
            const contactGeom = new THREE.BoxGeometry(8, 20, 5);
            const contact1 = new THREE.Mesh(contactGeom, contactMaterial);
            contact1.position.set(-30, 20, -210);
            stationGroup.add(contact1);

            const contact2 = new THREE.Mesh(contactGeom, contactMaterial);
            contact2.position.set(30, 20, -210);
            stationGroup.add(contact2);

            // LED
            const ledGeom = new THREE.SphereGeometry(5, 16, 16);
            const ledMesh = new THREE.Mesh(ledGeom, ledMaterial);
            ledMesh.position.set(0, 80, -275);
            stationGroup.add(ledMesh);

            stationGroup.visible = false;
            scene.add(stationGroup);
        }

        function animate() {
            requestAnimationFrame(animate);
            
            if (isAutoRotate && robotGroup) {
                robotGroup.rotation.y += 0.005;
            }
            
            controls.update();
            renderer.render(scene, camera);
        }

        function onWindowResize() {
            const container = document.getElementById('canvas-container');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        }

        function resetCamera() {
            camera.position.set(400, 300, 400);
            controls.reset();
            if (robotGroup) robotGroup.rotation.y = 0;
        }

        function toggleWireframe() {
            isWireframe = !isWireframe;
            robotGroup.traverse((child) => {
                if (child.isMesh) {
                    child.material.wireframe = isWireframe;
                }
            });
            stationGroup.traverse((child) => {
                if (child.isMesh) {
                    child.material.wireframe = isWireframe;
                }
            });
        }

        function toggleAutoRotate() {
            isAutoRotate = !isAutoRotate;
        }

        function toggleStation() {
            showStation = !showStation;
            stationGroup.visible = showStation;
        }

        function changeBgColor(color) {
            scene.background = new THREE.Color(color);
        }

        function changeColor(color) {
            if (topCoverMaterial) {
                topCoverMaterial.color.setHex(color);
            }
            document.querySelectorAll('.color-option').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Initialize
        init();
    </script>
</body>
</html>
